@*Modal.razor*@
@*A global Modal component that provides the Modal overlay and wrapper but allows the caller to add their own child components*@

@if(IsOpen)
{
	<div class="modal-overlay" @onclick="HandleOverlayClick">
		<div class="modal-container" @onclick:stopPropagation>
			<div class="modal-header">
				@if (ShowCloseButton)
				{
					<Button 
						Text="×"
						Variant="ButtonVariant.Secondary"
						OnClick="OnClose"
						Title="Close"
						Style="border-radius: 50%; font-size: 24px; padding: 4px; width: 2rem; height: 2rem" 
					/>
				}
			</div>

			<div class="modal-body">
				@if (Child != null)
				{
					@Child
				}
			</div>
		</div>
	</div>
}

@code {
	[Parameter] public bool IsOpen { get; set; }
	[Parameter] public EventCallback OnClose { get; set; }
	[Parameter] public bool CloseOnOverlayClick { get; set; } = true;
	[Parameter] public ModalVariant Variant { get; set; } = ModalVariant.Danger;
	[Parameter] public bool ShowCloseButton { get; set; } = true;
	[Parameter] public RenderFragment? Child { get; set; }

	private async Task HandleOverlayClick()
	{
		if (CloseOnOverlayClick)
		{
			await OnClose.InvokeAsync();
		}
	}
}
